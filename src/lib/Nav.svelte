<script>
	import DropDown from './DropDown.svelte';
	export let props;
	export let userStore;
	import Fa from 'svelte-fa';
	import { faArrowRightFromBracket } from '@fortawesome/free-solid-svg-icons';
</script>

{#if $userStore}
	<div />
{:else}
	<div
		class="sticky absolute top-0 z-40 w-full backdrop-blur flex-none transition-colors duration-500 lg:z-50"
	>
		<div class="max-w-8xl mx-auto">
			<div class="py-4 border-slate-900 lg:px-8 border-0 dark:border-slate-300 mx-4 lg:mx-0">
				<div class="relative flex items-center">
					<a class="mr-3 flex-none overflow-hidden" href="/">
						<span class="sr-only font-extrabold">{props.company.title}</span>
						<svg width="85" height="28" viewBox="0 0 85 28" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M42.981 26C40.8213 26 39.2548 25.6806 38.2814 25.0418C37.3384 24.403 36.7148 23.2928 36.4106 21.711C36.1369 20.1293 36 17.5741 36 14.0456C36 10.4867 36.1369 7.91635 36.4106 6.3346C36.7148 4.75285 37.3384 3.64259 38.2814 3.0038C39.2548 2.3346 40.8213 2 42.981 2C45.1711 2 46.7376 2.3346 47.6806 3.0038C48.654 3.64259 49.2776 4.75285 49.5513 6.3346C49.8555 7.91635 50.0076 10.4867 50.0076 14.0456C50.0076 17.5741 49.8555 20.1293 49.5513 21.711C49.2776 23.2928 48.654 24.403 47.6806 25.0418C46.7376 25.6806 45.1711 26 42.981 26ZM42.981 22.8517C44.1065 22.8517 44.8821 22.654 45.308 22.2586C45.7642 21.8631 46.0532 21.1027 46.1749 19.9772C46.2966 18.8517 46.3574 16.8745 46.3574 14.0456C46.3574 11.1863 46.2966 9.19392 46.1749 8.06844C46.0532 6.91255 45.7642 6.13688 45.308 5.74145C44.8517 5.34601 44.076 5.14829 42.981 5.14829C41.8859 5.14829 41.1103 5.34601 40.654 5.74145C40.2281 6.13688 39.9544 6.91255 39.8327 8.06844C39.711 9.19392 39.6502 11.1863 39.6502 14.0456C39.6502 16.8745 39.711 18.8517 39.8327 19.9772C39.9544 21.1027 40.2281 21.8631 40.654 22.2586C41.1103 22.654 41.8859 22.8517 42.981 22.8517Z" fill="black"/>
							<path d="M63.7371 12.038C63.7371 9.93916 63.6611 8.44867 63.509 7.56654C63.3873 6.65399 63.1136 6.06084 62.6877 5.78707C62.2923 5.48289 61.6383 5.3308 60.7257 5.3308C59.6915 5.3308 58.9463 5.61977 58.49 6.19772C58.0337 6.77567 57.7447 7.61217 57.6231 8.70723C57.5318 9.77186 57.4862 11.4753 57.4862 13.8175V25.635H53.836V2.36502H57.1668L57.3493 5.46768H57.6231C58.2314 3.1559 59.8284 2 62.4139 2C63.8436 2 64.9082 2.28897 65.6079 2.86692C66.3075 3.41445 66.779 4.28137 67.0223 5.46768C67.2657 6.62358 67.3873 8.31179 67.3873 10.5323V25.635H63.7371V12.038Z" fill="black"/>
							<path d="M84.5728 15.1407H74.7173C74.7173 17.4829 74.7933 19.1711 74.9454 20.2053C75.1279 21.2091 75.5082 21.9087 76.0861 22.3042C76.6945 22.6692 77.6831 22.8517 79.0519 22.8517C80.4815 22.8517 82.1698 22.6996 84.1165 22.3954V25.4068C83.4169 25.5589 82.5196 25.6958 81.4245 25.8175C80.3295 25.9392 79.28 26 78.2762 26C76.0861 26 74.4892 25.635 73.4854 24.9049C72.4816 24.1445 71.8276 22.9734 71.5234 21.3916C71.2192 19.7795 71.0671 17.3308 71.0671 14.0456C71.0671 10.73 71.1888 8.28137 71.4321 6.69962C71.7059 5.11787 72.3295 3.94677 73.3028 3.18631C74.3066 2.39544 75.9188 2 78.1393 2C80.1774 2 81.6374 2.36502 82.5196 3.09506C83.4321 3.8251 83.9948 4.96578 84.2078 6.51711C84.4511 8.06844 84.5728 10.5627 84.5728 14V15.1407ZM78.0481 5.14829C77.0139 5.14829 76.2686 5.31559 75.8123 5.65019C75.3865 5.95437 75.0975 6.59316 74.9454 7.56654C74.7933 8.53993 74.7173 10.1673 74.7173 12.4487H81.1507V11.9011C81.1507 9.8327 81.0595 8.34221 80.877 7.42966C80.7249 6.48669 80.4359 5.87833 80.0101 5.60456C79.6146 5.30038 78.9606 5.14829 78.0481 5.14829Z" fill="black"/>
							<path d="M22.74 26.1392L22.7301 26.1427L22.7201 26.146C20.9224 26.7362 18.0054 27 14.0816 27C10.0687 27 7.13815 26.7395 5.43319 26.1427C3.52167 25.5122 2.22552 24.2491 1.69145 22.3775C1.21364 20.703 1 17.8956 1 14.0618C1 10.1906 1.21323 7.36306 1.69049 5.68772C2.2218 3.77933 3.51548 2.48699 5.44314 1.85404C7.24084 1.26376 10.1578 1 14.0816 1C18.0054 1 20.9224 1.26376 22.7201 1.85404L22.7301 1.85732L22.74 1.8608C24.5735 2.50584 25.7868 3.81017 26.3095 5.68769C26.7868 7.36303 27 10.1906 27 14.0618C27 17.8956 26.7864 20.703 26.3086 22.3775L25.3469 22.1031L26.3086 22.3775C25.7823 24.2218 24.5632 25.4978 22.74 26.1392Z" stroke="black" stroke-width="2"/>
							<path d="M4.90383 10.129C0.8253 9.70528 7.41834 19.2008 9.63616 17.7952C10.0892 19.21 10.6316 20.4526 11.5195 21.1269C12.2546 21.6852 14.2963 23.0248 14.9431 22.7723C16.4837 22.1709 13.6817 17.0576 14.9431 15.7482C15.1805 15.5019 15.6528 15.1944 16.2529 14.8842C17.158 17.691 19.2196 21.1317 21.9956 16.5677C24.8489 11.8768 19.1057 13.4101 16.2529 14.8842C16.032 14.1993 15.8801 13.5521 15.8034 13.0683C15.7429 12.6871 15.7177 12.1018 15.7283 11.4053C18.0114 11.2218 21.26 9.21405 19.2442 5.1452C16.9186 0.451024 15.7864 7.59449 15.7283 11.4053C14.8959 11.4721 14.1919 11.2966 13.918 10.89C12.8929 9.36809 8.37479 6.34445 8.12318 6.73408C7.84415 7.16617 10.3023 16.5182 10.1729 16.9669C10.0539 17.3795 9.8692 17.6475 9.63616 17.7952C8.60401 14.5717 8.03615 10.4545 4.90383 10.129Z" fill="#202020"/>
							<path d="M13.2626 5.17755C13.2626 5.17755 10.5184 10.9649 12.2529 12.6493C12.5768 15.7137 14.7884 14.7177 17.015 13.2589C19.8972 12.9687 22.7455 11.9816 21.7422 10.8619C21.1298 10.1785 19.0661 11.915 17.015 13.2589C15.324 13.4291 13.6213 13.3595 12.678 12.936C12.5134 12.8621 12.3725 12.7654 12.2529 12.6493C12.0994 11.1975 12.3696 8.83444 13.2626 5.17755Z" fill="#151515"/>
							<path d="M5.84201 11.6264C4.75372 11.1096 7.9082 17.2606 9.85489 18.0246C10.6396 19.2872 11.455 20.4272 12.2373 21.097C12.862 21.632 13.4656 21.8671 14.0153 21.6251C15.3247 21.0487 14.0749 18.3651 15.147 17.1103C15.5464 16.6429 16.3634 16.1832 17.2119 15.8377C18.0265 16.4968 19.033 16.6132 19.7331 15.8448C20.5614 14.9357 18.8294 15.1792 17.2119 15.8377C16.5571 15.308 16.0263 14.4275 15.8782 13.374C15.8008 12.8235 15.8792 11.9912 16.0541 11.0677C17.8774 9.32134 19.3634 7.60594 18.8026 5.78098C18.2532 3.99317 16.6302 8.02546 16.0541 11.0677C14.8064 12.2627 13.4006 13.4722 12.3848 14.7413C12.0945 15.1039 10.856 10.2098 10.6421 10.5832C10.405 10.9973 11.2027 16.6803 11.0927 17.1103C10.8585 18.0263 10.4049 18.2404 9.85489 18.0246C8.15755 15.2934 6.60406 11.9883 5.84201 11.6264Z" fill="#2D8DFF"/>
							</svg>
							
							
					</a>
					<div class="hidden relative">
						<button
							class="text-xs leading-5 font-semibold bg-slate-400/10 rounded-full py-1 px-3 flex items-center space-x-2 hover:bg-slate-400/20 dark:highlight-white/5"
							id="headlessui-menu-button-6"
							type="button"
							aria-haspopup="true"
							aria-expanded="false"
						>
							v1
						</button>
					</div>

					<div class="relative lg:flex items-center ml-auto">
						<nav class="text-sm leading-6 font-semibold text-black">
							<ul class="flex space-x-8">
								{#if !$userStore}
									{#each props.navigation.links as link}
										<li class="dropdown relative">
											{#if link.items.length > 0}
												<DropDown links={link.items} title={link.title} />
											{:else}
												<a href="/{link.link}">{link.title}</a>
											{/if}
										</li>
									{/each}
								{/if}
								{#if $userStore}
									<li>
										<span
											class="text-sm text-slate-500 font-normal font- bg-slate-200 rounded-md p-0.5 px-2 m-2"
											>{$userStore.email}</span
										>
									</li>
									<li>
										<a
											class=" text-sky-500 dark:text-sky-500 hover:text-black-500 dark:hover:text-black-400"
											href="/logout"
										>
											<Fa class="mt-1" icon={faArrowRightFromBracket} />
										</a>
									</li>
								{:else}
									<li>
										<a
											class="text-sky-500 dark:text-sky-500 hover:text-black-500 dark:hover:text-black-400"
											href="/login">Sign In</a
										>
									</li>
								{/if}
							</ul>
						</nav>
					</div>

					<div class="ml-2 -my-1 hidden">
						<button
							type="button"
							class="text-slate-500 w-8 h-8 flex items-center justify-center hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300"
						>
							<span class="sr-only">Navigation</span><svg
								width="24"
								height="24"
								fill="none"
								aria-hidden="true"
							>
								<path
									d="M12 6v.01M12 12v.01M12 18v.01M12 7a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm0 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm0 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"
									stroke="currentColor"
									stroke-width="1.5"
									stroke-linecap="round"
									stroke-linejoin="round"
								/>
							</svg>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
{/if}
